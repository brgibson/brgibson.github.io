<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="UTF-8"/>
	<title>Ben's Experiments - Tennis Standings</title>
	<script type='text/javascript' src='./knockout/knockout-2.3.0.js'></script>
	<!--link rel="stylesheet" href="./base.css" /-->	
<style type="text/css">
.classname {
/*	-moz-box-shadow:inset 0px 1px 0px 0px #ffffff;*/
/*	-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;*/
/*	box-shadow:inset 0px 1px 0px 0px #ffffff;*/
/*	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );*/
/*	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.5, #ffffff), color-stop(1, #b4b4b4) );*/
/*	background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );*/
/*	background-color: #ededed;*/

/*	-webkit-border-top-left-radius:6px;
	-moz-border-radius-topleft:6px;
	border-top-left-radius:6px;
	-webkit-border-top-right-radius:6px;
	-moz-border-radius-topright:6px;
	border-top-right-radius:6px;
	-webkit-border-bottom-right-radius:6px;
	-moz-border-radius-bottomright:6px;
	border-bottom-right-radius:6px;
	-webkit-border-bottom-left-radius:6px;
	-moz-border-radius-bottomleft:6px;
	border-bottom-left-radius:6px;
*/
	/*text-indent:0;
	border:1px solid #dcdcdc;*/
/*	display:inline-block;
	color:#777777;

	font-family:arial;
	font-size:15px;
	font-weight:bold;
	font-style:normal;
	height:50px;
	line-height:50px;
	width:100px;

	text-decoration:none;
	text-align:center;
	text-shadow:1px 1px 0px #ffffff;*/
}
/*
.classname:hover {
	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
	background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed');
	background-color:#dfdfdf;
}.classname:active {
	position:relative;
	top:1px;
}
*/
</style>

	<style>
	body {
		font-family: helvetica;
  	font-weight: 300;
  	font-size: .7em;
	}
	table {
		border-collapse: collapse;
		background-color: #efe;
		/*
	  -moz-box-shadow:    3px 3px 5px 6px #ccc;
	  -webkit-box-shadow: 3px 3px 5px 6px #ccc;
	  box-shadow:         3px 3px 5px 6px #ccc;
		*/
	}
	tr {
		border: solid 1px green;
	}
	th {
		padding: 1em;
		background-color: #fff;
	}
	td {
  	font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
		padding: .7em 1em;
	}
	ul {
		padding: 0;
		margin: 0;
	}
	li {
		display:block;
	}
	.score,
	.opponent {
		white-space: nowrap;
	}
	.win {
		background-color: lightgreen;
	}
	.lose {
		background-color: lightpink;
	}
	.oof {
		opacity: 0.4;
	}
	</style>
</head>

<body>
	<h1 data-bind="click: removeHighlight">Tennis Standings</h1>
	<div class="tennis">
		<table>
			<thead>
				<tr>
					<th class="classname" data-bind="click: playerNameSort">Player Name</th>
					<th class="classname" data-bind="click: ratingSort">Rating</th>
					<th class="classname" data-bind="click: pointsSort">Total Points</th>
					<!-- ko foreach: players()[0].matches -->	
					<th class="classname" data-bind="click: function() {$parent.pointsInMatchSort($index())},
						 										text: ($index() + 1)"></th>
					<!-- /ko -->
				</tr>
			</thead>
			<tbody data-bind="foreach: players"> 
				<tr>
					<td data-bind="text: playerName,
					 					click: function() {$parent.highlightPlayer(playerName)}, clickBubble: false,
										css: isOutOfFocus() ? 'oof' : ''"></td>
					<td data-bind="text: rating, css: isOutOfFocus() ? 'oof' : ''"></td>
					<td data-bind="text: points, css: isOutOfFocus() ? 'oof' : ''"></td>
					<!-- ko foreach: matches -->	
					<td style="text-align: center"
						 data-bind="css: isOutOfFocus() ? 'oof ' + cssClass : cssClass,
						 				click: function() {$root.highlightPlayer(opponent)}, clickBubble: false">
						<ul>
							<li class="score" data-bind="text: score, css: isOutOfFocus() ? 'oof' : ''"></li>
							<li class="opponent" data-bind="text: opponent, css: isOutOfFocus() ? 'oof' : ''"></li>
							<li data-bind="text:points, css: isOutOfFocus() ? 'oof' : ''"></li>
						</ul>
					</td>
					<!-- /ko -->
				</tr>
			</tbody>
		</table>
	</div>
</body>
<script type='text/javascript' src='./tennis/playerStats.js'></script>
<script type='text/javascript' src='./tennis/tennis-mock-data.js'></script>
<script type='text/javascript' src='./tennis/tennis-view-models.js'></script>
<script type='text/javascript' src='./tennis/tennis-view-model-adapter.js'></script>
<script> 
var useMockData = false;

if (useMockData) {
	ko.applyBindings(new TennisViewModel().setPlayers(mockPlayers));
} else {
	ko.applyBindings(new TennisViewModelAdapter(playerStats).adapt());
}
</script>
</html>
