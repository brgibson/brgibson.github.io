<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="UTF-8"/>
	<title>Ben's Experiments - Movies</title>
	<script type='text/javascript' src='./knockout/knockout-2.3.0.js'></script>
	<!--link rel="stylesheet" href="./base.css" /-->	
	<style>
	table {
		border-collapse: collapse;
		background-color: #efe;
	}
	tr {
		border: solid 1px green;
	}
	th {
		padding: 1em;
	}
	td {
		padding: .7em 1em;
	}
	ul {
		padding: 0;
		margin: 0;
	}
	li {
		display:block;
	}
	.score,
	.opponent {
		white-space: nowrap;
	}
	.win {
		background-color: lightgreen;
	}
	.lose {
		background-color: lightpink;
	}
	</style>
</head>

<body>
	<h1>Tennis Standings</h1>
	<div class="tennis">
		<table>
			<thead>
				<tr>
					<th data-bind="click: playerNameSort">Player Name</th>
					<th data-bind="click: ratingSort">Rating</th>
					<th data-bind="click: pointsSort">Total Points</th>
					<!-- ko foreach: players()[0].matches -->	
					<th data-bind="click: function() {$parent.pointsInMatchSort($index())},
												 text: ($index() + 1)"></th>
					<!-- /ko -->
				</tr>
			</thead>
			<tbody data-bind="foreach: players"> 
				<tr>
					<td data-bind="text: playerName"></td>
					<td data-bind="text:rating"></td>
					<td data-bind="text:points"></td>
					<!-- ko foreach: matches -->	
					<td style="text-align:center" data-bind="css: cssClass">
						<ul>
							<li class="score" data-bind="text:score"></li>
							<li class="opponent" data-bind="text:opponent"></li>
							<li data-bind="text:points"></li>
						</ul>
					</td>
					<!-- /ko -->
				</tr>
			</tbody>
		</table>
	</div>
</body>
<script type='text/javascript' src='./tennis/playerStats.js'></script>
<script type='text/javascript' src='./tennis/tennis-mock-data.js'></script>
<script type='text/javascript' src='./tennis/tennis-view-models.js'></script>
<script type='text/javascript' src='./tennis/tennis-view-model-adapter.js'></script>
<script> 
var useMockData = false;

if (useMockData) {
	ko.applyBindings(new TennisViewModel().setPlayers(mockPlayers));
} else {
	ko.applyBindings(new TennisViewModelAdapter(playerStats).adapt());
}
</script>
</html>
