<!doctype html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <title>Ben's Experiments - Contacts Widget</title>
        <link rel="stylesheet" href="./contacts.css">
    </head>
    <body>
        <div class="widgetContainer">
            <h1>Contacts</h1>

            <ul id="contacts" class="contacts allowHover">
                <!-- this markup will get overwritten from the parsed file - inserting as a placeholder -->
                <ul id="contacts" class="contacts allowHover"><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Amar</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/amar.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:amardeep@live.com" itemprop="email">amardeep@live.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:408-555-1234 itemprop=" telephone'="">408-555-1234</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="555 Halford Ave. Apartment #43C"><span>555 Halford Ave. - <a href="#">map</a></span><span>Apartment #43C</span><span class="city" itemprop="addressLocality">Santa Clara</span>, <span class="state" itemprop="addressRegion ">CA</span><span itemprop="postalCode">95051</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Deepa</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/deepa.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:deepa@yahoo.com" itemprop="email">deepa@yahoo.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:408-555-1234 itemprop=" telephone'="">408-555-1234</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="1234 Montcalm St. &lt;/td&gt;"><span>1234 Montcalm St. - <a href="#">map</a></span><span></span><span class="city" itemprop="addressLocality">Chula Vista</span>, <span class="state" itemprop="addressRegion ">CA</span><span itemprop="postalCode">91911</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Eric</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/eric.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:eric@ericrules.com" itemprop="email">eric@ericrules.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:408-555-1234 itemprop=" telephone'="">408-555-1234</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="10 Candyland &lt;/td&gt;"><span>10 Candyland - <a href="#">map</a></span><span></span><span class="city" itemprop="addressLocality">North Pole</span>, <span class="state" itemprop="addressRegion ">PA</span><span itemprop="postalCode">87996</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Gregor</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/gregor.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:gregor@gmail.com" itemprop="email">gregor@gmail.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:897-984-3145 itemprop=" telephone'="">897-984-3145</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="Gregor Insurance Co. 1234 Strip St."><span>Gregor Insurance Co. - <a href="#">map</a></span><span>1234 Strip St.</span><span class="city" itemprop="addressLocality">New York</span>, <span class="state" itemprop="addressRegion ">NY</span><span itemprop="postalCode">45879</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Jeff</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/jeff.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:jeff@aol.com" itemprop="email">jeff@aol.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:408-555-1234 itemprop=" telephone'="">408-555-1234</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="1234 Montcalm St. &lt;/td&gt;"><span>1234 Montcalm St. - <a href="#">map</a></span><span></span><span class="city" itemprop="addressLocality">Chula Vista</span>, <span class="state" itemprop="addressRegion ">CA</span><span itemprop="postalCode">91911</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Jen</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/jen.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:jen@ebay.com" itemprop="email">jen@ebay.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:408-555-1234 itemprop=" telephone'="">408-555-1234</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="1234 Lily St. &lt;/td&gt;"><span>1234 Lily St. - <a href="#">map</a></span><span></span><span class="city" itemprop="addressLocality">San Diego</span>, <span class="state" itemprop="addressRegion ">CA</span><span itemprop="postalCode">91911</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Katie</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/katie.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:katie@ask.com" itemprop="email">katie@ask.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:415-555-1234 itemprop=" telephone'="">415-555-1234</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="949 Thunk Ct. &lt;/td&gt;"><span>949 Thunk Ct. - <a href="#">map</a></span><span></span><span class="city" itemprop="addressLocality">Sacramento</span>, <span class="state" itemprop="addressRegion ">CA</span><span itemprop="postalCode">95826</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li><li><dl class="singleContact" itemscope="" itemtype="http://schema.org/Person"><dt class="name" data-type="name" itemprop="name">Vivian</dt><dd class="details"><dl><dt>Photo</dt><dd class="image"><img src="./images/vivian.gif" itemprop="image"></dd><dt>Email</dt><dd class="show email" data-type="email"><a href="mailto:vivian@altavista.com" itemprop="email">vivian@altavista.com</a></dd><dt>Phone Number</dt><dd class="phone" data-type="phone"><a href="tel:650-458-1234 itemprop=" telephone'="">650-458-1234</a></dd><dt>Address</dt><dd class="address" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><meta class="none" itemprop="streetAddress" content="949 FooBar St. &lt;/td&gt;"><span>949 FooBar St. - <a href="#">map</a></span><span></span><span class="city" itemprop="addressLocality">San Mateo</span>, <span class="state" itemprop="addressRegion ">CA</span><span itemprop="postalCode">98745</span></dd><dt>Chats</dt><dd><a href="#">Chats</a></dd><dt>Emails</dt><dd><a href="#">Emails</a></dd></dl></dd></dl></li></ul>
            </ul>
            
            <div class="dropdown">
                <select id="defaultDisplay">
                    <option value="email">Email address</option>
                    <option value="phone">Phone number</option>
                </select>
            </div>
        </div>
        
        <script src="./appendSelector.js"></script> <!-- contains a single function (appendSelector) to handle consistenly appending selectors -->
        <script src="./removeSelector.js"></script> <!-- contains a single function (removeSelector) to handle consistenly removing selectors -->
        <script src="./tabularContactData.js"></script> <!-- contains a single string (tabularContactData) containing all of the contacts -->
        <script src="./convertTabularContactData.js"></script> <!-- contains a single function (convertTabularContactData) which takes a string of tabular contact data and returns the markup to be inserted into the "contacts" div -->
        <script src="./buildDefaultDisplayEventHandler.js"></script> <!-- contains a single function (buildDefaultDisplayEventHandler) which returns the event handler for the "defaultDisplay" select list -->
        <script src="./attachClickHandlers.js"></script> <!-- contains a single function (attachClickHandlers) for attaching the click handlers for pinning a contact's details open -->
        <script>
            (function() {
                /* add the contacts to the page */
                var contactsContainer = document.getElementById("contacts")
                contactsContainer.innerHTML = convertTabularContactData(tabularContactData);

                /* add a click event handler so that we can support pinning the details open on click for touch devices */ 
                attachClickHandlers(contactsContainer);
                
                /* add event handler for email/phone select list */
                //get the email and phone DOM elements
                var emailElements = [],
                    phoneElements = [];
                (function() {
                    var ddElements = contactsContainer.getElementsByTagName("dd");
                    for (var i = 0; i < ddElements.length; i++) {
                        switch (ddElements[i].getAttribute("data-type")) {
                            case "email": emailElements.push(ddElements[i]); break;
                            case "phone": phoneElements.push(ddElements[i]); break;
                        }
                    }
                })();
                
                //attach the event handler
                var defaultDisplyInput = document.getElementById("defaultDisplay");
                defaultDisplyInput.onchange = (function() {
                    var eventHandler = buildDefaultDisplayEventHandler(contactsContainer, emailElements, phoneElements);
                    return function() {
                        eventHandler(defaultDisplyInput.value);
                    };
                })();
                
                /* reorder the email and phone elements, based on the order of the select list */
                defaultDisplyInput.onchange();
            })();
        </script>
    </body>
</html>